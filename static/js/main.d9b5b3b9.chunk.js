(this["webpackJsonpreact-firebase_eweje-garden"]=this["webpackJsonpreact-firebase_eweje-garden"]||[]).push([[0],{213:function(e,t,a){e.exports=a(443)},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},422:function(e,t,a){},443:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(57),i=a.n(s),c=(a(218),a(19)),l=a(20),o=a(33),m=a(23),d=a(22),u=(a(219),a(220),a(169)),g={apiKey:"AIzaSyAlBTx86b1Jy1ckSUmmvGhZj9ZMfpVciRo",authDomain:"eweje-garden.firebaseapp.com",databaseURL:"https://eweje-garden.firebaseio.com",projectId:"eweje-garden",storageBucket:"eweje-garden.appspot.com"},h=a.n(u).a.initializeApp(g),b=h.auth(),p=h.database(),v=a(25),E=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getDataFromRange=function(e,t,a){var n,r=new Date,s=new Date;s.setDate(r.getDate()-e);var i=[];for(var c in t)(n=new Date(t[c].date)).setHours(t[c].time.substring(0,2)),n.setMinutes(t[c].time.substring(2,4)),n.setSeconds(t[c].time.substring(4)),n>=s&&n<=r&&(t[c].datetime=n.getTime(),i.push(t[c]));for(var l=[],o=0;o<i.length;o++)if("-"!==i[o][a]){var m={};m[i[o].sensor]=i[o][a],m.datetime=i[o].datetime,l.push(m)}return l},n.getLabel=function(e){return{temp:"Temperature (\xb0F)",humidity:"Humidity (%)",soil_moisture:"Soil Moisture",light:"Light (lux)"}[e]},n.graphTheThing=function(e){return r.a.createElement(v.c,{height:"100%",width:"100%"},r.a.createElement(v.b,{data:n.getDataFromRange(n.state.range,e,n.props.measurement)},r.a.createElement(v.e,{hide:!0,type:"number",dataKey:"datetime",domain:["dataMin","dataMax"],tick:!1}),r.a.createElement(v.f,{hide:!0,domain:["dataMin","dataMax"],tick:!1,tickFormatter:function(e){return parseFloat(e).toFixed(0)}}),r.a.createElement(v.a,{type:"monotone",dataKey:"Sensor1",stroke:n.state.colors[0],strokeWidth:2,dot:!1,isAnimationActive:!1,connectNulls:!0}),r.a.createElement(v.a,{type:"monotone",dataKey:"Sensor2",stroke:n.state.colors[1],strokeWidth:2,dot:!1,isAnimationActive:!1,connectNulls:!0}),r.a.createElement(v.a,{type:"monotone",dataKey:"Sensor3",stroke:n.state.colors[2],strokeWidth:2,dot:!1,isAnimationActive:!1,connectNulls:!0}),r.a.createElement(v.d,{labelFormatter:function(e){return new Date(e).toString()}})))},n.state={range:e.range,data:null,colors:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.signInAnonymously().catch((function(e){console.log("Failed sign in"),console.log(e.code),console.log(e.message)})),b.onAuthStateChanged((function(e){})),p.ref("data").on("value",(function(t){var a=t.val()?t.val():{};e.setState({data:a})}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100%",width:"100%"}},this.graphTheThing(this.state.data))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.range!==e.range||t.colors!==e.colors?{range:e.range,colors:e.colors}:null}}]),a}(n.Component),f=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={range:1,measurement:null,colors:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({measurement:this.props.measurement})}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:320}},r.a.createElement(E,{colors:this.state.colors,range:this.state.range,measurement:this.state.measurement}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.range!==e.range||t.colors!==e.colors?{range:e.range,colors:e.colors}:null}}]),a}(n.Component),N=a(450),w=a(451),y=a(452),k=a(3),D=a.n(k),x=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).getDataFromRange=function(e,t,a,n){var r,s=new Date,i=new Date;i.setDate(i.getDate()-t),s.setDate(s.getDate()-e);var c=[];for(var l in a)(r=new Date(a[l].date)).setHours(a[l].time.substring(0,2)),r.setMinutes(a[l].time.substring(2,4)),r.setSeconds(a[l].time.substring(4)),r>=i&&r<=s&&(a[l].datetime=r.getTime(),c.push(a[l]));for(var o=[],m=0;m<c.length;m++)if("-"!==c[m][n]){var d={};d[c[m].sensor]=c[m][n],d.datetime=c[m].datetime,o.push(d)}return o},e.getAverage=function(e,t){for(var a=0,n=0,r=0;r<e.length;r++)t in e[r]&&"-"!==e[r][t]&&(a+=e[r][t],n+=1);return(a/n).toFixed(1)},e.getDelta=function(e,t,a){for(var n=0,s=0,i=0;i<e.length;i++)a in e[i]&&"-"!==e[i][a]&&(n+=e[i][a],s+=1);for(var c=n/s,l=0,o=0,m=0;m<t.length;m++)a in t[m]&&"-"!==t[m][a]&&(l+=t[m][a],o+=1);var d=l/o,u=100*(c-d)/d;return isNaN(u)?r.a.createElement("td",{className:"text-center"},"N/a"):u>=0?r.a.createElement("td",{className:"text-center text-success"},u.toFixed(1).toString().concat("%")):r.a.createElement("td",{className:"text-center text-danger"},u.toFixed(1).toString().concat("%"))},e.getTable=function(){for(var t=[],a=0;a<e.state.sensorNames.length;a++){var s=e.state.sensorNames[a];t.push(r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},s),r.a.createElement("td",{className:"text-center"},e.getAverage(e.state.temp_data,s)),e.getDelta(e.state.temp_data,e.state.temp_delta,s),r.a.createElement("td",{className:"text-center"},e.getAverage(e.state.moisture_data,s)),e.getDelta(e.state.moisture_data,e.state.moisture_delta,s),r.a.createElement("td",{className:"text-center"},e.getAverage(e.state.light_data,s)),e.getDelta(e.state.light_data,e.state.light_delta,s),r.a.createElement("td",{className:"text-center"},e.getAverage(e.state.humidity_data,s)),e.getDelta(e.state.humidity_data,e.state.humidity_delta,s)))}return r.a.createElement(n.Fragment,null,t)},e.state={sensorNames:[],temp_data:{},temp_delta:{},moisture_data:{},moisture_delta:{},humidity_data:{},humidity_delta:{},light_data:{},light_delta:{},range:{}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.ref("data").on("value",(function(t){var a=t.val()?t.val():{};e.setState({sensorNames:"",temp_data:e.getDataFromRange(0,e.props.range,a,"temp"),temp_delta:e.getDataFromRange(e.props.range,2*e.props.range,a,"temp"),moisture_data:e.getDataFromRange(0,e.props.range,a,"soil_moisture"),moisture_delta:e.getDataFromRange(e.props.range,2*e.props.range,a,"soil_moisture"),humidity_data:e.getDataFromRange(0,e.props.range,a,"humidity"),humidity_delta:e.getDataFromRange(e.props.range,2*e.props.range,a,"humidity"),light_data:e.getDataFromRange(0,e.props.range,a,"light"),light_delta:e.getDataFromRange(e.props.range,2*e.props.range,a,"light"),range:e.props.range})}))}},{key:"render",value:function(){return r.a.createElement("table",{className:"align-middle mb-0 table table-borderless table-striped table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Sensor"),r.a.createElement("th",{className:"text-center"},"Avg. Temp"),r.a.createElement("th",{className:"text-center"},"\u0394Temp"),r.a.createElement("th",{className:"text-center"},"Avg. Moisture"),r.a.createElement("th",{className:"text-center"},"\u0394Moisture"),r.a.createElement("th",{className:"text-center"},"Avg. Sunlight"),r.a.createElement("th",{className:"text-center"},"\u0394Sunlight"),r.a.createElement("th",{className:"text-center"},"Avg. Humidity"),r.a.createElement("th",{className:"text-center"},"\u0394Humidity"))),r.a.createElement("tbody",null,this.getTable()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.sensorNames!==e.sensorNames||t.range!==e.range?{range:e.range,sensorNames:e.sensorNames}:null}}]),a}(r.a.Component),S=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={activeTab1:"11"},e.toggle1=e.toggle1.bind(Object(o.a)(e)),e}return Object(l.a)(a,[{key:"toggle1",value:function(e){this.state.activeTab1!==e&&(this.setState({activeTab1:e}),console.log(e))}},{key:"render",value:function(){var e=this;return r.a.createElement(N.a,{className:"main-card mb-3"},r.a.createElement("div",{className:"card-header"},"Your Data",r.a.createElement("div",{className:"btn-actions-pane-right"},r.a.createElement("div",{role:"group",className:"btn-group-sm btn-group"},r.a.createElement("button",{outline:!0,className:"btn btn-info"+D()({active:"11"===this.state.activeTab1}),onClick:function(){e.toggle1("11")}},"24 hours"),r.a.createElement("button",{outline:!0,className:"btn btn-info"+D()({active:"22"===this.state.activeTab1}),onClick:function(){e.toggle1("22")}},"Week"),r.a.createElement("button",{outline:!0,className:"btn btn-info"+D()({active:"33"===this.state.activeTab1}),onClick:function(){e.toggle1("33")}},"Month"),r.a.createElement("button",{outline:!0,className:"btn btn-info"+D()({active:"44"===this.state.activeTab1}),onClick:function(){e.toggle1("44")}},"All time")))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement(w.a,{activeTab:this.state.activeTab1},r.a.createElement(y.a,{tabId:"11"},r.a.createElement(x,{sensorNames:["Sensor1","Sensor2","Sensor3"],range:1})),r.a.createElement(y.a,{tabId:"22"},r.a.createElement(x,{sensorNames:["Sensor1","Sensor2","Sensor3"],range:7})),r.a.createElement(y.a,{tabId:"33"},r.a.createElement(x,{sensorNames:["Sensor1","Sensor2","Sensor3"],range:30})),r.a.createElement(y.a,{tabId:"44"},r.a.createElement(x,{sensorNames:["Sensor1","Sensor2","Sensor3"],range:1e3})))),r.a.createElement("div",{className:"d-block text-center card-footer"},r.a.createElement("button",{className:"mr-2 btn-icon btn-icon-only btn btn-outline-danger"},r.a.createElement("i",{className:"pe-7s-trash btn-icon-wrapper"}," ")),r.a.createElement("button",{className:"btn-wide btn btn-success"},"Save")))}}]),a}(r.a.Component),j=(a(409),a(410),a(179)),A=a.n(j),_=(a(422),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).mapper={temp:"\xb0F",soil_moisture:"",humidity:"%",light:" lux"},n.getAverage=function(e,t){var a=[];for(var r in t)"-"!==t[r][e]&&a.push(t[r][e]);for(var s=0,i=0;i<a.length;i++)s+=a[i];return(s/a.length).toFixed(1).toString().concat(n.mapper[n.props.measurement])},n.state={data:null,avg:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.ref("data").on("value",(function(t){var a=t.val()?t.val():{};e.setState({data:a,avg:e.getAverage(e.props.measurement,a)})}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.avg)}}]),a}(n.Component)),O=a(180),T=a(453),F=a(454),C=a(455),M=a(456),R=a(459),L=a(458),B=a(457),I=(a(423),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={dropdownOpen:!1,activeTab1:"11",time:1,dropdownText:"Last 24 Hours"},e.toggle=e.toggle.bind(Object(o.a)(e)),e.toggle1=e.toggle1.bind(Object(o.a)(e)),e.changeRange=e.changeRange.bind(Object(o.a)(e)),e}return Object(l.a)(a,[{key:"toggle",value:function(){this.setState((function(e){return{dropdownOpen:!e.dropdownOpen}}))}},{key:"changeRange",value:function(e,t){console.log(e),this.setState({time:e,dropdownOpen:!this.state.dropdownOpen,dropdownText:t})}},{key:"toggle1",value:function(e){this.state.activeTab1!==e&&(this.setState({activeTab1:e}),console.log(e))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("section",{id:"banner"},r.a.createElement("h1",{className:"mb-5"},r.a.createElement("b",null,"The Eweje Garden")),r.a.createElement(O.a,{outline:!0,className:"mb-3 mr-2 btn-transition",color:"secondary"},r.a.createElement("a",{href:"https://github.com/sopeeweje/eweje-garden",target:"_blank",rel:"noopener noreferrer",className:"text-white"},"(Link to docs)"))),r.a.createElement(n.Fragment,null,r.a.createElement(A.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},r.a.createElement("div",{className:"m-4"},r.a.createElement(T.a,null,r.a.createElement(F.a,{md:"12",lg:"6"},r.a.createElement(N.a,{className:"mb-3"},r.a.createElement(C.a,{className:"card-header-tab"}," ",r.a.createElement("div",{className:"card-header-title"},r.a.createElement("i",{className:"header-icon lnr-chart-bars icon-gradient bg-deep-blue"}," "),"Live Data"),r.a.createElement("div",{className:"btn-actions-pane-right"},r.a.createElement(M.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle,className:"d-inline-block"},r.a.createElement(R.a,{caret:!0,color:"dark"},this.state.dropdownText),r.a.createElement(L.a,null,r.a.createElement(B.a,{header:!0},"Time frame"),r.a.createElement(B.a,{range:1,onClick:function(){return e.changeRange(1,"Last 24 Hours")}},"Last 24 Hours"),r.a.createElement(B.a,{range:7,onClick:function(){return e.changeRange(7,"Last Week")}},"Last Week"),r.a.createElement(B.a,{range:30,onClick:function(){return e.changeRange(30,"Last Month")}},"Last Month"),r.a.createElement(B.a,{range:1e4,onClick:function(){return e.changeRange(1e4,"All Data")}},"All Data"))),r.a.createElement(O.a,{outline:!0,className:"ml-1  btn-pill btn-wide border-0 btn-transition text-white bg-grow-early",onClick:function(){e.toggle1("11")}},"Temp"),r.a.createElement(O.a,{outline:!0,className:"ml-1 btn-pill btn-wide border-0 btn-transition text-white bg-love-kiss",color:"primary",onClick:function(){e.toggle1("22")}},"Humidity"),r.a.createElement(O.a,{outline:!0,className:"ml-1 btn-pill btn-wide border-0 btn-transition text-white bg-malibu-beach",color:"primary",onClick:function(){e.toggle1("33")}},"Moisture"),r.a.createElement(O.a,{outline:!0,className:"ml-1 btn-pill btn-wide border-0 btn-transition text-white bg-sunny-morning",onClick:function(){e.toggle1("44")}},"Light"))),r.a.createElement(w.a,{activeTab:this.state.activeTab1},r.a.createElement(y.a,{tabId:"11"},r.a.createElement("div",{className:"widget-chart p-0"},r.a.createElement(f,{range:this.state.time,measurement:"temp",colors:["#196F3D","#52BE80","#ABEBC6"]}))),r.a.createElement(y.a,{tabId:"22"},r.a.createElement("div",{className:"widget-chart p-0"},r.a.createElement(f,{range:this.state.time,measurement:"humidity",colors:["#7B241C","#C0392B","#E6B0AA"]}))),r.a.createElement(y.a,{tabId:"33"},r.a.createElement("div",{className:"widget-chart p-0"},r.a.createElement(f,{range:this.state.time,measurement:"soil_moisture",colors:["#21618C","#3498DB","#AED6F1"]}))),r.a.createElement(y.a,{tabId:"44"},r.a.createElement("div",{className:"widget-chart p-0"},r.a.createElement(f,{range:this.state.time,measurement:"light",colors:["#B7950B","#F4D03F","#FAD7A0"]})))))),r.a.createElement(F.a,{md:"12",lg:"6"},r.a.createElement(T.a,null,r.a.createElement(F.a,{md:"6"},r.a.createElement("div",{className:"card mb-3 bg-sunny-morning widget-chart text-white card-border"},r.a.createElement("div",{className:"icon-wrapper rounded-circle"},r.a.createElement("div",{className:"icon-wrapper-bg bg-white opacity-4"}),r.a.createElement("i",{className:"lnr-sun"})," "),r.a.createElement("div",{className:"widget-numbers"},r.a.createElement(_,{measurement:"light"})),r.a.createElement("div",{className:"widget-subheading"},"Avg. Sunlight"))),r.a.createElement(F.a,{md:"6"},r.a.createElement("div",{className:"card mb-3 bg-malibu-beach widget-chart text-white card-border"},r.a.createElement("div",{className:"icon-wrapper rounded"},r.a.createElement("div",{className:"icon-wrapper-bg bg-white opacity-4"}),r.a.createElement("i",{className:"lnr-drop"})),r.a.createElement("div",{className:"widget-numbers"},r.a.createElement(_,{measurement:"soil_moisture"})),r.a.createElement("div",{className:"widget-subheading"},"Avg. Moisture"))),r.a.createElement(F.a,{md:"6"},r.a.createElement("div",{className:"card mb-3 bg-grow-early widget-chart text-white card-border"},r.a.createElement("div",{className:"icon-wrapper rounded"},r.a.createElement("div",{className:"icon-wrapper-bg bg-white opacity-4"}),r.a.createElement("i",{className:"lnr-earth"})),r.a.createElement("div",{className:"widget-numbers"},r.a.createElement(_,{measurement:"temp"})),r.a.createElement("div",{className:"widget-subheading"},"Avg. Temperature"))),r.a.createElement(F.a,{md:"6"},r.a.createElement("div",{className:"card mb-3 bg-love-kiss widget-chart card-border"},r.a.createElement("div",{className:"widget-chart-content text-white"},r.a.createElement("div",{className:"icon-wrapper rounded-circle"},r.a.createElement("div",{className:"icon-wrapper-bg bg-white opacity-4"}),r.a.createElement("i",{className:"lnr-cloud"})),r.a.createElement("div",{className:"widget-numbers"},r.a.createElement(_,{measurement:"humidity"})),r.a.createElement("div",{className:"widget-subheading"},"Avg. Humidity"))))))),r.a.createElement(T.a,null,r.a.createElement(F.a,{md:"12"},r.a.createElement(S,null)))))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[213,1,2]]]);
//# sourceMappingURL=main.d9b5b3b9.chunk.js.map